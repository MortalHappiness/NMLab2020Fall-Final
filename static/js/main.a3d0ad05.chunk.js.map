{"version":3,"sources":["features/post/postSlice.js","features/answer/answerSlice.js","store/index.js","utils/getWeb3.js","contractApi.js","contractContext.js","components/appBar.js","utils/index.js","features/utils/textDisplayer.js","features/post/postItem.js","features/utils/textEditor.js","constant/tagList.js","features/post/addPostModal.js","features/post/postList.js","features/tagList/index.js","features/user/ranking.js","features/pages/mainPage.js","features/post/post.js","features/answer/answerItem.js","features/answer/answerList.js","features/answer/addAnswerModal.js","features/pages/postPage.js","features/pages/userPage.js","App.js","Web3.js","serviceWorker.js","index.js"],"names":["postSlice","createSlice","name","initialState","init","postList","reducers","setPostList","state","action","payload","map","ele","id","slice","reverse","actions","selectPost","post","answerSlice","answerList","setAnswerList","selectAnswer","answer","configureStore","reducer","postReducer","answerReducer","getWeb3","Promise","resolve","reject","window","addEventListener","a","ethereum","web3","Web3","enable","console","log","provider","providers","HttpProvider","ContractAPI","this","accounts","networkId","deployedNetwork","contract","gas","ACCOUNT_CREATE_ETHER_FEE","TOKEN_VALUE","INIT_TOKENS","MIN_POST_CREATE_TOKEN_FEE","EXPIRE_TIME","eth","getAccounts","net","getId","AppContract","networks","Contract","abi","address","initConstant","getAccountCreateEtherFee","getTokenValue","getInitTokens","getMinPostCreateTokenFee","getExpireTime","methods","call","title","content","tokens","tags","addPost","send","from","getPosts","postIds","getPostsByIds","postId","addAnswer","getAnswers","answerIds","getAnswersByIds","answerId","increaseUpVotes","increaseDownVotes","createAccount","value","getAccountInfo","ether","ether2token","token2ether","getUsers","requestForExpire","ContractContext","createContext","children","useState","contractAPI","setContractAPI","useEffect","api","Provider","useStyles","makeStyles","theme","root","flexGrow","menuButton","marginRight","spacing","flex","cursor","offset","mixins","toolbar","userName","breakpoints","down","display","HideOnScroll","trigger","useScrollTrigger","Slide","appear","direction","in","AppBar","classes","history","useHistory","open","message","status","snackbarProp","setSnackbarProp","useContext","handleSignUp","location","reload","error","isUser","setIsUser","userDisplay","setUserDisplay","res","userAddress","className","position","color","Toolbar","style","minHeight","Typography","variant","onClick","push","Button","component","Link","to","noWrap","Snackbar","autoHideDuration","onClose","Alert","severity","relativeTime","require","timeFromNow","timestamp","dayjs","fromNow","getBlockStyle","block","getType","RichDisplayer","props","displayerState","blockStyleFn","editorState","readOnly","width","marginBottom","marginTop","chip","marginLeft","PostItem","author","displayTime","EditorState","createEmpty","setDisplayerState","createWithContent","convertFromRaw","JSON","parse","Card","CardActionArea","CardContent","CardActions","disableSpacing","Box","tag","Chip","size","label","key","RichEditor","focus","refs","editor","onChange","setEditorState","handleKeyCommand","command","_handleKeyCommand","onTab","e","_onTab","toggleBlockType","type","_toggleBlockType","toggleInlineStyle","_toggleInlineStyle","newState","RichUtils","blockType","inlineStyle","contentState","getCurrentContent","hasText","getBlockMap","first","onToggle","customStyleMap","styleMap","placeholder","ref","spellCheck","React","Component","CODE","backgroundColor","fontFamily","fontSize","padding","StyleButton","preventDefault","active","onMouseDown","BLOCK_TYPES","BlockStyleControls","selection","getSelection","getBlockForKey","getStartKey","INLINE_STYLES","InlineStyleControls","currentStyle","getCurrentInlineStyle","has","tagList","typography","textAlign","postTitle","tokenTextFiled","margin","box","border","borderRadius","none","AddPostModal","addPostDialogOpen","setAddPostDialogOpen","setNewPost","setTitle","token","setToken","userToken","setUserToken","chosedTagList","setChosedTagList","unchosedTagList","setUnchosedTagList","user","Dialog","scroll","fullWidth","maxWidth","DialogTitle","DialogContent","dividers","TextField","currentTarget","InputLabelProps","shrink","inputProps","min","InputProps","endAdornment","InputAdornment","mt","mb","idx","filter","_tag","handleRemoveTag","handleAddTag","DialogActions","Number","confirmed","disabled","PostList","dispatch","useDispatch","useSelector","postFilter","newPost","handleAddPost","stringify","convertToRaw","fetchPostList","flexDirection","some","TagList","setPostFilter","ranking","alignItems","Ranking","rankingList","setRankingList","tmp","r","votes","parseInt","totalUpVotes","totalDownVotes","sort","b","List","ListItem","button","paddingRight","paddingLeft","Divider","justifyContent","flexBasis","Main","Container","answerBtn","avatar","requestExpireBtn","Post","setAddAnswerDialogOpen","isExpired","expireTime","setExpireTime","handleRequestExpire","CardHeader","Avatar","aria-label","subheader","titleTypographyProps","subheaderTypographyProps","Date","now","thumbUp","thumbUpIcon","cardHeader","AnswerItem","downVotes","upVotes","upVoteCnt","setUpVoteCnt","downVoteCnt","setDownVoteCnt","handleClickUpThumb","handleClickDownThumb","IconButton","AnswerList","fetchAnswerList","length","AddAnswerModal","addAnswerDialogOpen","handleAddAnswer","PostPage","postid","useParams","setPost","getRes","UserPage","userid","setTokens","setPostIds","setIssuedAnswerIds","setTotalUpVotes","setUpVotedAnswerIds","setTotalDownVotes","setDownVotedAnswerIds","setPosts","answers","setAnswers","setToken2ether","setOpen","handleClose","handleToken2Ether","setEther","openEther","setOpenEther","handleCloseEther","handleEther2Token","accountInfo","issuedAnswerIds","upVotedAnswerIds","downVotedAnswerIds","fetchPosts","fetchAnswers","ListItemText","parentPostId","aria-labelledby","DialogContentText","autoFocus","required","target","createMuiTheme","h1","h2","h3","h4","h5","h6","palette","primary","main","MyRoute","basename","process","path","App","store","ThemeProvider","CssBaseline","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.a3d0ad05.chunk.js","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const postSlice = createSlice({\n  name: \"post\",\n  initialState: {\n    init: false,\n    postList: [],\n  },\n  reducers: {\n    setPostList: (state, action) => {\n      state.postList = action.payload\n        .map((ele, id) => ({ ...ele, id }))\n        .slice()\n        .reverse();\n    },\n  },\n});\n\nexport const { setPostList } = postSlice.actions;\n\nexport const selectPost = (state) => state.post;\n\nexport default postSlice.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const answerSlice = createSlice({\n  name: \"answer\",\n  initialState: {\n    answerList: [],\n  },\n  reducers: {\n    setAnswerList: (state, action) => {\n      state.answerList = action.payload.slice().reverse();\n    },\n  },\n});\n\nexport const { setAnswerList } = answerSlice.actions;\n\nexport const selectAnswer = (state) => state.answer;\n\nexport default answerSlice.reducer;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport postReducer from \"../features/post/postSlice\";\nimport answerReducer from \"../features/answer/answerSlice\";\n// import counterReducer from \"../features/counter/counterSlice\";\n\nexport default configureStore({\n  reducer: {\n    // counter: counterReducer,\n    post: postReducer,\n    answer: answerReducer,\n  },\n});\n","import Web3 from \"web3\";\n\nconst getWeb3 = () =>\n  new Promise((resolve, reject) => {\n    // Wait for loading completion to avoid race conditions with web3 injection timing.\n    window.addEventListener(\"load\", async () => {\n      // Modern dapp browsers...\n      if (window.ethereum) {\n        const web3 = new Web3(window.ethereum);\n        try {\n          // Request account access if needed\n          await window.ethereum.enable();\n          // Acccounts now exposed\n          resolve(web3);\n        } catch (error) {\n          reject(error);\n        }\n      }\n      // Legacy dapp browsers...\n      else if (window.web3) {\n        // Use Mist/MetaMask's provider.\n        const { web3 } = window;\n        console.log(\"Injected web3 detected.\");\n        resolve(web3);\n      }\n      // Fallback to localhost; use dev console port by default...\n      else {\n        const provider = new Web3.providers.HttpProvider(\n          \"http://127.0.0.1:7545\"\n        );\n        const web3 = new Web3(provider);\n        console.log(\"No web3 instance injected, using Local web3.\");\n        resolve(web3);\n      }\n    });\n  });\n\n// For Testing\n// const getWeb3 = () =>\n//   new Promise((resolve, reject) => {\n//     const provider = new Web3.providers.HttpProvider(\"http://127.0.0.1:7545\");\n//     const web3 = new Web3(provider);\n//     console.log(\"No web3 instance injected, using Local web3.\");\n//     resolve(web3);\n//   });\nexport default getWeb3;\n","import AppContract from \"./contracts/App.json\";\nimport getWeb3 from \"./utils/getWeb3\";\n\nclass ContractAPI {\n  constructor() {\n    this.web3 = null;\n    this.accounts = null;\n    this.networkId = null;\n    this.deployedNetwork = null;\n    this.contract = null;\n\n    this.gas = 1000000;\n\n    // constant\n    this.ACCOUNT_CREATE_ETHER_FEE = null;\n    this.TOKEN_VALUE = null;\n    this.INIT_TOKENS = null;\n    this.MIN_POST_CREATE_TOKEN_FEE = null;\n    this.EXPIRE_TIME = null;\n  }\n\n  // initialize function\n  async init() {\n    this.web3 = await getWeb3();\n    this.accounts = await this.web3.eth.getAccounts();\n    this.networkId = await this.web3.eth.net.getId();\n    this.deployedNetwork = AppContract.networks[this.networkId];\n    this.contract = new this.web3.eth.Contract(\n      AppContract.abi,\n      this.deployedNetwork && this.deployedNetwork.address\n    );\n    // console.log(this.web3, this.accounts, this.networkId, this.contract);\n    this.initConstant();\n  }\n\n  async initConstant() {\n    this.ACCOUNT_CREATE_ETHER_FEE = await this.getAccountCreateEtherFee();\n    this.TOKEN_VALUE = await this.getTokenValue();\n    this.INIT_TOKENS = await this.getInitTokens();\n    this.MIN_POST_CREATE_TOKEN_FEE = await this.getMinPostCreateTokenFee();\n    this.EXPIRE_TIME = await this.getExpireTime();\n    console.log(\n      this.ACCOUNT_CREATE_ETHER_FEE,\n      this.TOKEN_VALUE,\n      this.INIT_TOKENS,\n      this.MIN_POST_CREATE_TOKEN_FEE,\n      this.EXPIRE_TIME\n    );\n  }\n\n  // getter function\n  getAccountCreateEtherFee() {\n    return this.contract.methods.getAccountCreateEtherFee().call();\n  }\n\n  getTokenValue() {\n    return this.contract.methods.getTokenValue().call();\n  }\n\n  getInitTokens() {\n    return this.contract.methods.getInitTokens().call();\n  }\n\n  getMinPostCreateTokenFee() {\n    return this.contract.methods.getMinPostCreateTokenFee().call();\n  }\n\n  getExpireTime() {\n    return this.contract.methods.getExpireTime().call();\n  }\n\n  // mutate function\n  addPost(title, content, tokens, tags) {\n    // assert(tokens > this.MIN_POST_CREATE_TOKEN_FEE);\n    return this.contract.methods\n      .addPost(title, content, tokens, tags)\n      .send({ from: this.accounts[0], gas: this.gas });\n  }\n\n  getPosts() {\n    return this.contract.methods.getPosts().call();\n  }\n\n  getPostsByIds(postIds) {\n    // array\n    return this.contract.methods.getPostsByIds(postIds).call();\n  }\n\n  addAnswer(postId, content) {\n    return this.contract.methods\n      .addAnswer(postId, content)\n      .send({ from: this.accounts[0], gas: this.gas });\n  }\n\n  getAnswers(postId) {\n    return this.contract.methods.getAnswers(postId).call();\n  }\n\n  getAnswersByIds(answerIds) {\n    // array\n    return this.contract.methods.getAnswersByIds(answerIds).call();\n  }\n\n  increaseUpVotes(answerId) {\n    return this.contract.methods\n      .increaseUpVotes(answerId)\n      .send({ from: this.accounts[0], gas: this.gas });\n  }\n\n  increaseDownVotes(answerId) {\n    return this.contract.methods\n      .increaseDownVotes(answerId)\n      .send({ from: this.accounts[0], gas: this.gas });\n  }\n\n  createAccount() {\n    return this.contract.methods.createAccount().send({\n      from: this.accounts[0],\n      value: this.ACCOUNT_CREATE_ETHER_FEE,\n      gas: this.gas,\n    });\n  }\n\n  getAccountInfo() {\n    return this.contract.methods.getAccountInfo().call({\n      from: this.accounts[0],\n    });\n  }\n\n  ether2token(ether) {\n    return this.contract.methods.ether2token().send({\n      from: this.accounts[0],\n      value: ether * this.TOKEN_VALUE,\n      gas: this.gas,\n    });\n  }\n\n  token2ether(tokens) {\n    return this.contract.methods.token2ether(tokens).send({\n      from: this.accounts[0],\n      gas: this.gas,\n    });\n  }\n\n  getUsers() {\n    return this.contract.methods.getUsers().call();\n  }\n\n  requestForExpire(postId) {\n    return this.contract.methods.requestForExpire(postId).send({\n      from: this.accounts[0],\n      gas: this.gas,\n    });\n  }\n}\n\nexport default ContractAPI;\n","import React, { useState, useEffect, createContext } from \"react\";\nimport ContractAPI from \"./contractApi\";\n\nconst ContractContext = createContext(null);\n\nexport { ContractContext };\n\nexport default ({ children }) => {\n  const [contractAPI, setContractAPI] = useState(null);\n\n  useEffect(async () => {\n    const api = new ContractAPI();\n    await api.init();\n    setContractAPI(api);\n  }, []);\n  return (\n    <ContractContext.Provider value={contractAPI}>\n      {children}\n    </ContractContext.Provider>\n  );\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport Bar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\n// import IconButton from \"@material-ui/core/IconButton\";\n// import MenuIcon from \"@material-ui/icons/Menu\";\nimport useScrollTrigger from \"@material-ui/core/useScrollTrigger\";\nimport Slide from \"@material-ui/core/Slide\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Alert from \"@material-ui/lab/Alert\";\n\nimport { ContractContext } from \"../contractContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flex: 1,\n    cursor: \"pointer\",\n  },\n  offset: theme.mixins.toolbar,\n  userName: {\n    [theme.breakpoints.down(\"sm\")]: {\n      display: \"none\",\n    },\n  },\n}));\n\nfunction HideOnScroll({ children }) {\n  const trigger = useScrollTrigger();\n  return (\n    <Slide appear={false} direction=\"down\" in={!trigger}>\n      {children}\n    </Slide>\n  );\n}\n\nexport default function AppBar() {\n  const classes = useStyles();\n  const history = useHistory();\n  const [snackbarProp, setSnackbarProp] = useState({\n    open: false,\n    message: \"\",\n    status: \"null\",\n  });\n  const contractAPI = useContext(ContractContext);\n  const handleClick = () => {\n    history.push(\"/\");\n  };\n  const handleSignUp = async () => {\n    try {\n      const res = await contractAPI.createAccount();\n      setSnackbarProp({\n        open: true,\n        message: `SignUp Successfully!`,\n        status: \"success\",\n      });\n      window.location.reload(false);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  // user display\n  const [isUser, setIsUser] = useState(false);\n  const [userDisplay, setUserDisplay] = useState(\"Sign Up\");\n  useEffect(async () => {\n    if (contractAPI) {\n      try {\n        const res = await contractAPI.getAccountInfo();\n        setUserDisplay(res.userAddress);\n        setIsUser(true);\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  }, [contractAPI]);\n\n  return (\n    <div className={classes.root}>\n      <HideOnScroll>\n        <Bar position=\"fixed\" color=\"primary\">\n          <Toolbar style={{ minHeight: \"56px\" }}>\n            {/* <IconButton\n            edge=\"start\"\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"menu\"\n          >\n            <MenuIcon />\n          </IconButton> */}\n            <Typography\n              variant=\"h1\"\n              className={classes.title}\n              onClick={() => handleClick()}\n            >\n              知識+ D-App\n            </Typography>\n            {isUser ? (\n              <Button\n                color=\"inherit\"\n                component={Link}\n                to={`/user/${userDisplay}`}\n              >\n                <Typography className={classes.userName} noWrap>\n                  {userDisplay}\n                </Typography>\n              </Button>\n            ) : (\n              <Button color=\"inherit\" onClick={handleSignUp}>\n                {userDisplay}\n              </Button>\n            )}\n          </Toolbar>\n        </Bar>\n      </HideOnScroll>\n      <div className={classes.offset} />\n      <Snackbar\n        open={snackbarProp.open}\n        autoHideDuration={2000}\n        onClose={() => setSnackbarProp({ ...snackbarProp, open: false })}\n      >\n        <Alert severity={snackbarProp.status}>{snackbarProp.message}</Alert>\n      </Snackbar>\n    </div>\n  );\n}\n","import * as dayjs from \"dayjs\";\n\nconst relativeTime = require(\"dayjs/plugin/relativeTime\");\n\nexport function timeFromNow(timestamp) {\n  dayjs.extend(relativeTime);\n  return dayjs.unix(timestamp).fromNow();\n}\n","import React, { useState } from 'react';\nimport { Editor } from 'draft-js';\nimport 'draft-js/dist/Draft.css';\nimport './textEditor.css'\n\nfunction getBlockStyle(block) {\n  switch (block.getType()) {\n    case 'blockquote': return 'RichEditor-blockquote';\n    default: return null;\n  }\n}\n\nconst RichDisplayer = (props) => {\n  const { displayerState } = props\n\n  return (\n    <div className=\"RichDisplayer-root\">\n      <div className=\"RichEditor-editor\">\n        <Editor\n          blockStyleFn={getBlockStyle}\n          editorState={displayerState}\n          readOnly\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default RichDisplayer;","import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport Chip from \"@material-ui/core/Chip\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport { Link } from \"react-router-dom\";\nimport { EditorState, convertFromRaw } from \"draft-js\";\nimport { timeFromNow } from \"../../utils\";\n\nimport RichTextDisplayer from \"../utils/textDisplayer\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    marginBottom: theme.spacing(2),\n    marginTop: theme.spacing(2),\n  },\n  chip: {\n    marginLeft: theme.spacing(0.5),\n    marginRight: theme.spacing(0.5),\n    marginBottom: theme.spacing(0.5),\n  },\n}));\n\nconst PostItem = ({ title, content, author, tags, timestamp, id, tokens }) => {\n  const classes = useStyles();\n  const displayTime = timeFromNow(timestamp);\n\n  const [displayerState, setDisplayerState] = useState(() =>\n    EditorState.createEmpty()\n  );\n\n  useEffect(() => {\n    if (content) {\n      setDisplayerState(\n        EditorState.createWithContent(convertFromRaw(JSON.parse(content)))\n      );\n    }\n  }, [content]);\n\n  return (\n    <Card className={classes.root} variant=\"outlined\">\n      <CardActionArea component={Link} to={`/post/${id}`}>\n        <CardContent>\n          <Typography variant=\"h1\">\n            {\" \"}\n            <strong>\n              {title} [{tokens} csb]\n            </strong>{\" \"}\n          </Typography>\n          <RichTextDisplayer displayerState={displayerState} />\n          <Typography variant=\"body2\" color=\"textSecondary\" noWrap>\n            creator: {author}\n          </Typography>\n          <Typography variant=\"body2\" color=\"textSecondary\">\n            {displayTime}\n          </Typography>\n        </CardContent>\n        <CardActions disableSpacing>\n          <Box>\n            {tags.map((tag) => (\n              <Chip\n                className={classes.chip}\n                variant=\"outlined\"\n                color=\"primary\"\n                size=\"small\"\n                label={tag}\n                key={tag}\n              />\n            ))}\n          </Box>\n        </CardActions>\n      </CardActionArea>\n    </Card>\n  );\n};\n\nexport default PostItem;\n","import React, { useState } from 'react';\nimport { Editor, EditorState, RichUtils } from 'draft-js';\nimport 'draft-js/dist/Draft.css';\nimport './textEditor.css'\n\nclass RichEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    // this.state = {editorState: EditorState.createEmpty()};\n\n    this.focus = () => this.refs.editor.focus();\n    this.onChange = (editorState) => this.props.setEditorState(editorState);\n\n    this.handleKeyCommand = (command) => this._handleKeyCommand(command);\n    this.onTab = (e) => this._onTab(e);\n    this.toggleBlockType = (type) => this._toggleBlockType(type);\n    this.toggleInlineStyle = (style) => this._toggleInlineStyle(style);\n  }\n\n  _handleKeyCommand(command) {\n    const { editorState } = this.props;\n    const newState = RichUtils.handleKeyCommand(editorState, command);\n    if (newState) {\n      this.onChange(newState);\n      return true;\n    }\n    return false;\n  }\n\n  _onTab(e) {\n    const maxDepth = 4;\n    this.onChange(RichUtils.onTab(e, this.props.editorState, maxDepth));\n  }\n\n  _toggleBlockType(blockType) {\n    this.onChange(\n      RichUtils.toggleBlockType(\n        this.props.editorState,\n        blockType\n      )\n    );\n  }\n\n  _toggleInlineStyle(inlineStyle) {\n    this.onChange(\n      RichUtils.toggleInlineStyle(\n        this.props.editorState,\n        inlineStyle\n      )\n    );\n  }\n\n  render() {\n    const { editorState } = this.props;\n\n    // If the user changes block type before entering any text, we can\n    // either style the placeholder or hide it. Let's just hide it now.\n    let className = 'RichEditor-editor';\n    var contentState = editorState.getCurrentContent();\n    if (!contentState.hasText()) {\n      if (contentState.getBlockMap().first().getType() !== 'unstyled') {\n        className += ' RichEditor-hidePlaceholder';\n      }\n    }\n\n    return (\n      <div className=\"RichEditor-root\">\n        <BlockStyleControls\n          editorState={editorState}\n          onToggle={this.toggleBlockType}\n        />\n        <InlineStyleControls\n          editorState={editorState}\n          onToggle={this.toggleInlineStyle}\n        />\n        <div className={className} onClick={this.focus}>\n          <Editor\n            blockStyleFn={getBlockStyle}\n            customStyleMap={styleMap}\n            editorState={editorState}\n            handleKeyCommand={this.handleKeyCommand}\n            onChange={this.onChange}\n            onTab={this.onTab}\n            placeholder=\"Write down your idea here...\"\n            ref=\"editor\"\n            spellCheck={true}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\n// Custom overrides for \"code\" style.\nconst styleMap = {\n  CODE: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n    fontFamily: '\"Inconsolata\", \"Menlo\", \"Consolas\", monospace',\n    fontSize: 16,\n    padding: 2,\n  },\n};\n\nfunction getBlockStyle(block) {\n  switch (block.getType()) {\n    case 'blockquote': return 'RichEditor-blockquote';\n    default: return null;\n  }\n}\n\nclass StyleButton extends React.Component {\n  constructor() {\n    super();\n    this.onToggle = (e) => {\n      e.preventDefault();\n      this.props.onToggle(this.props.style);\n    };\n  }\n\n  render() {\n    let className = 'RichEditor-styleButton';\n    if (this.props.active) {\n      className += ' RichEditor-activeButton';\n    }\n\n    return (\n      <span className={className} onMouseDown={this.onToggle}>\n        {this.props.label}\n      </span>\n    );\n  }\n}\n\nconst BLOCK_TYPES = [\n  { label: 'H1', style: 'header-one' },\n  { label: 'H2', style: 'header-two' },\n  { label: 'H3', style: 'header-three' },\n  { label: 'H4', style: 'header-four' },\n  { label: 'H5', style: 'header-five' },\n  { label: 'H6', style: 'header-six' },\n  { label: '\"Blockquote\"', style: 'blockquote' },\n  { label: 'UL', style: 'unordered-list-item' },\n  { label: 'OL', style: 'ordered-list-item' },\n  { label: 'Code Block', style: 'code-block' },\n];\n\nconst BlockStyleControls = (props) => {\n  const { editorState } = props;\n  const selection = editorState.getSelection();\n  const blockType = editorState\n    .getCurrentContent()\n    .getBlockForKey(selection.getStartKey())\n    .getType();\n\n  return (\n    <div className=\"RichEditor-controls\">\n      {BLOCK_TYPES.map((type) =>\n        <StyleButton\n          key={type.label}\n          active={type.style === blockType}\n          label={type.label}\n          onToggle={props.onToggle}\n          style={type.style}\n        />\n      )}\n    </div>\n  );\n};\n\nvar INLINE_STYLES = [\n  { label: 'Bold', style: 'BOLD' },\n  { label: 'Italic', style: 'ITALIC' },\n  { label: 'Underline', style: 'UNDERLINE' },\n  { label: 'Monospace', style: 'CODE' },\n];\n\nconst InlineStyleControls = (props) => {\n  var currentStyle = props.editorState.getCurrentInlineStyle();\n  return (\n    <div className=\"RichEditor-controls\">\n      {INLINE_STYLES.map(type =>\n        <StyleButton\n          key={type.label}\n          active={currentStyle.has(type.style)}\n          label={type.label}\n          onToggle={props.onToggle}\n          style={type.style}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default RichEditor;","const tagList = [\n  \"Health\",\n  \"Business and Finance\",\n  \"Entertainment\",\n  \"Home\",\n  \"Family\",\n  \"Pets\",\n  \"Children\",\n  \"Government\",\n  \"Education\",\n  \"News\",\n  \"Travel\",\n  \"Vehicle\",\n  \"Electronic Product\",\n  \"Environment\",\n  \"Society\",\n  \"Science\",\n  \"Beauty\",\n  \"Art\",\n  \"Game\",\n  \"Sports\",\n  \"Computer\",\n  \"Food\",\n];\n\nexport default tagList;","import React, { useState, useEffect, useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\n\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\n\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport Box from \"@material-ui/core/Box\";\nimport Chip from \"@material-ui/core/Chip\";\n\nimport { Editor, EditorState, convertToRaw, convertFromRaw } from \"draft-js\";\n\nimport { ContractContext } from \"../../contractContext\";\nimport RichTextEditor from \"../utils/textEditor\";\nimport tagList from \"../../constant/tagList\";\n\nconst useStyles = makeStyles((theme) => ({\n  typography: {\n    textAlign: \"center\",\n    marginBottom: theme.spacing(1),\n    color: \"#9999\",\n  },\n  postTitle: {\n    fontSize: \"26px\",\n  },\n  tokenTextFiled: {\n    marginTop: theme.spacing(2),\n    width: \"20%\",\n  },\n  chip: {\n    margin: theme.spacing(0.5),\n  },\n  box: {\n    border: \"solid #c4c4c4 1px\",\n    borderRadius: \"3px\",\n    padding: \"10px\",\n  },\n  none: {\n    color: \"#c4c4c4\",\n  },\n}));\n\nconst AddPostModal = (props) => {\n  const {\n    addPostDialogOpen,\n    setAddPostDialogOpen,\n    editorState,\n    setEditorState,\n    setNewPost,\n  } = props;\n\n  const classes = useStyles();\n  const contractAPI = useContext(ContractContext);\n  const [title, setTitle] = useState(\"\");\n  const [token, setToken] = useState(0);\n  const [userToken, setUserToken] = useState(0);\n  const [chosedTagList, setChosedTagList] = useState([]);\n  const [unchosedTagList, setUnchosedTagList] = useState(tagList);\n  const [snackbarProp, setSnackbarProp] = useState({\n    open: false,\n    message: \"\",\n    status: \"null\",\n  });\n\n  const handleAddButtonClick = () => {\n    if (Number(token) < contractAPI.MIN_POST_CREATE_TOKEN_FEE) {\n      setSnackbarProp({\n        open: true,\n        message: `The minimum amount of bounty is ${contractAPI.MIN_POST_CREATE_TOKEN_FEE}!`,\n        status: \"error\",\n      });\n      return;\n    }\n    if (Number(token) > userToken) {\n      setSnackbarProp({\n        open: true,\n        message: `Your tokens are not enough!`,\n        status: \"error\",\n      });\n      return;\n    }\n    setNewPost({\n      title,\n      tokens: Number(token),\n      tags: chosedTagList,\n      confirmed: true,\n    });\n    setAddPostDialogOpen(false);\n  };\n\n  const handleAddTag = (tag) => {\n    setChosedTagList([...chosedTagList, tag]);\n    setUnchosedTagList(unchosedTagList.filter((_tag) => _tag !== tag));\n  };\n\n  const handleRemoveTag = (tag) => {\n    setUnchosedTagList([...unchosedTagList, tag]);\n    setChosedTagList(chosedTagList.filter((_tag) => _tag !== tag));\n  };\n\n  useEffect(async () => {\n    if (contractAPI) {\n      try {\n        const user = await contractAPI.getAccountInfo();\n        setUserToken(user.tokens);\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  }, [contractAPI]);\n\n  return (\n    <Dialog\n      open={addPostDialogOpen}\n      onClose={() => setAddPostDialogOpen(false)}\n      scroll=\"paper\"\n      fullWidth\n      maxWidth=\"lg\"\n    >\n      <DialogTitle id=\"scroll-dialog-title\">\n        <Typography variant=\"h1\">Ask Question</Typography>\n      </DialogTitle>\n      <DialogContent dividers>\n        <TextField\n          value={title}\n          variant=\"outlined\"\n          onChange={(e) => setTitle(e.currentTarget.value)}\n          InputLabelProps={{ shrink: false }}\n          inputProps={{ className: classes.postTitle }}\n          placeholder=\"Enter your title here\"\n          fullWidth\n        />\n        <TextField\n          className={classes.tokenTextFiled}\n          size=\"small\"\n          value={token}\n          onChange={(e) => setToken(e.currentTarget.value)}\n          label=\"Bounty\"\n          inputProps={{\n            type: \"number\",\n            min: contractAPI ? contractAPI.MIN_POST_CREATE_TOKEN_FEE : 0,\n          }}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">csb</InputAdornment>,\n          }}\n          variant=\"outlined\"\n        />\n        <Box mt={1} mb={1} className={classes.box}>\n          <Typography>Tags</Typography>\n          {chosedTagList.map((tag, idx) => (\n            <Chip\n              className={classes.chip}\n              variant=\"outlined\"\n              label={tag}\n              onClick={() => handleRemoveTag(tag)}\n              color=\"primary\"\n              key={`chipchosed_${idx}`}\n            />\n          ))}\n        </Box>\n        <Typography\n          variant=\"overline\"\n          display=\"block\"\n          className={classes.typography}\n        >\n          ---- Choose your tag from below ----\n        </Typography>\n        {unchosedTagList.map((tag, idx) => (\n          <Chip\n            className={classes.chip}\n            variant=\"outlined\"\n            label={tag}\n            onClick={() => handleAddTag(tag)}\n            color=\"primary\"\n            key={`chipunchosed_${idx}`}\n          />\n        ))}\n\n        <Box mt={2}>\n          <Typography\n            variant=\"overline\"\n            display=\"block\"\n            className={classes.typography}\n          >\n            ---- Describe your question below ----\n          </Typography>\n        </Box>\n        {editorState ? (\n          <RichTextEditor\n            editorState={editorState}\n            setEditorState={setEditorState}\n          />\n        ) : (\n          <></>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => setAddPostDialogOpen(false)} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={handleAddButtonClick}\n          color=\"primary\"\n          disabled={!title}\n        >\n          Ask\n        </Button>\n      </DialogActions>\n      <Snackbar\n        open={snackbarProp.open}\n        autoHideDuration={2000}\n        onClose={() => setSnackbarProp({ ...snackbarProp, open: false })}\n      >\n        <Alert severity={snackbarProp.status}>{snackbarProp.message}</Alert>\n      </Snackbar>\n    </Dialog>\n  );\n};\n\nexport default AddPostModal;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\n\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Alert from \"@material-ui/lab/Alert\";\n\nimport { EditorState, convertToRaw } from \"draft-js\";\n\nimport { selectPost, setPostList } from \"./postSlice\";\n// import { Web3Context } from \"../../Web3\";\nimport { ContractContext } from \"../../contractContext\";\n\nimport PostItem from \"./postItem\";\nimport AddPostModal from \"./addPostModal\";\n\nconst PostList = (props) => {\n  // Initialize\n  const dispatch = useDispatch();\n  const { postList } = useSelector(selectPost);\n  const contractAPI = useContext(ContractContext);\n  const { postFilter } = props;\n\n  const [newPost, setNewPost] = useState({\n    title: \"\",\n    tokens: 0,\n    tags: [],\n    confirmed: false,\n  });\n  const [addPostDialogOpen, setAddPostDialogOpen] = useState(false);\n  const [editorState, setEditorState] = useState(() =>\n    EditorState.createEmpty()\n  );\n  const [snackbarProp, setSnackbarProp] = useState({\n    open: false,\n    message: \"\",\n    status: \"null\",\n  });\n\n  // Ask Queston\n  const handleAddPost = async () => {\n    const payload = {\n      title: newPost.title,\n      content: JSON.stringify(convertToRaw(editorState.getCurrentContent())),\n      tokens: newPost.tokens,\n      tags: newPost.tags,\n    };\n    // console.log('new post payload', payload)\n    try {\n      await contractAPI.addPost(\n        payload.title,\n        payload.content,\n        payload.tokens,\n        payload.tags\n      );\n      // console.log(res);\n      setSnackbarProp({\n        open: true,\n        message: `New question added!`,\n        status: \"success\",\n      });\n      // Refetch post\n      const fetchPostList = await contractAPI.getPosts();\n      dispatch(setPostList(fetchPostList));\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  useEffect(() => {\n    if (newPost && newPost.confirmed) handleAddPost();\n  }, [newPost]);\n\n  // useEffect(async () => {\n  //   if (contractAPI) {\n  //     const user = await contractAPI.getAccountInfo()\n  //     console.log('user', user.tokens)\n  //   }\n  // }, [contractAPI])\n\n  return (\n    <div>\n      <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n        <Typography variant=\"h2\" style={{ flexGrow: 1 }}>\n          Questions\n        </Typography>\n        <Button\n          // className={classes.answerBtn}\n          size=\"medium\"\n          color=\"secondary\"\n          variant=\"outlined\"\n          onClick={() => setAddPostDialogOpen(true)}\n        >\n          Ask Questions\n        </Button>\n      </div>\n      {postList\n        .filter((post) => {\n          if (!postFilter) return true;\n\n          return post.tags.some((tag) => tag === postFilter);\n        })\n        .map((post, idx) => (\n          <PostItem {...post} key={idx} />\n        ))}\n      <AddPostModal\n        addPostDialogOpen={addPostDialogOpen}\n        setAddPostDialogOpen={setAddPostDialogOpen}\n        editorState={editorState}\n        setEditorState={setEditorState}\n        setNewPost={setNewPost}\n      />\n      <Snackbar\n        open={snackbarProp.open}\n        autoHideDuration={2000}\n        onClose={() => setSnackbarProp({ ...snackbarProp, open: false })}\n      >\n        <Alert severity={snackbarProp.status}>{snackbarProp.message}</Alert>\n      </Snackbar>\n    </div>\n  );\n};\n\nexport default PostList;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport tagList from '../../constant/tagList'\n\n// const tagList = [\n//   \"health\",\n//   \"Business and Finance\",\n//   \"Entertainment\",\n//   \"Home\",\n//   \"Family\",\n//   \"Pets\",\n//   \"Children\",\n//   \"Government\",\n//   \"Education\",\n//   \"News\",\n//   \"Travel\",\n//   \"Vehicle\",\n//   \"Electronic Product\",\n//   \"Environment\",\n//   \"Society\",\n//   \"Science\",\n//   \"Beauty\",\n//   \"Art\",\n//   \"Game\",\n//   \"Sports\",\n//   \"Computer\",\n//   \"Food\",\n// ];\n\nconst useStyles = makeStyles((theme) => ({\n  tag: {\n    marginTop: theme.spacing(1.5),\n    cursor: \"pointer\",\n  },\n}));\n\nconst TagList = (props) => {\n  const classes = useStyles();\n  const { setPostFilter } = props;\n  return (\n    <div>\n      <Typography variant=\"h2\" color=\"initial\">\n        Catagories\n      </Typography>\n      <Typography\n        className={classes.tag}\n        variant=\"body2\"\n        color=\"textSecondary\"\n        key='All'\n        onClick={() => setPostFilter(null)}\n      >\n        All\n      </Typography>\n      {tagList.map((tag) => (\n        <Typography\n          className={classes.tag}\n          variant=\"body2\"\n          color=\"textSecondary\"\n          key={tag}\n          onClick={() => setPostFilter(tag)}\n        >\n          {tag}\n        </Typography>\n      ))}\n    </div>\n  );\n};\n\nexport default TagList;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Link } from \"react-router-dom\";\n\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Divider from \"@material-ui/core/Divider\";\n\nimport { ContractContext } from \"../../contractContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  ranking: {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n}));\n\nconst Ranking = () => {\n  const classes = useStyles();\n  const [rankingList, setRankingList] = useState([]);\n  const contractAPI = useContext(ContractContext);\n\n  useEffect(async () => {\n    if (contractAPI) {\n      const res = await contractAPI.getUsers();\n      const tmp = [];\n      res.map((r) => {\n        if (r.userAddress !== \"0x0000000000000000000000000000000000000000\")\n          tmp.push({\n            userAddress: r.userAddress,\n            votes: parseInt(r.totalUpVotes) - parseInt(r.totalDownVotes),\n          });\n      });\n      tmp.sort((a, b) => (a.votes < b.votes ? 1 : -1)).slice(0, 10);\n      setRankingList(tmp);\n    }\n  }, [contractAPI]);\n  return (\n    <div>\n      <Typography variant=\"h2\">Most Voted</Typography>\n      <List>\n        {rankingList.map(({ userAddress, votes }, idx) => (\n          <div key={idx}>\n            <ListItem\n              button\n              component={Link}\n              to={`/user/${userAddress}`}\n              style={{ paddingRight: 0, paddingLeft: 0 }}\n            >\n              <div className={classes.ranking}>\n                <Typography style={{ margin: 8 }} variant=\"h3\" color=\"initial\">\n                  <strong>{`${idx + 1}`}</strong>\n                </Typography>\n                <Typography\n                  color=\"textSecondary\"\n                  style={{ flexGrow: 1 }}\n                  noWrap\n                >\n                  {userAddress}...\n                </Typography>\n                <Typography variant=\"body1\" color=\"textSecondary\">\n                  {votes}\n                </Typography>\n              </div>\n            </ListItem>\n            <Divider />\n          </div>\n        ))}\n      </List>\n    </div>\n  );\n};\n\nexport default Ranking;\n","import React, { useState, useEffect, useContext } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\n\nimport PostList from \"../post/postList\";\nimport TagList from \"../tagList\";\nimport Ranking from \"../user/ranking\";\nimport { setPostList } from \"../post/postSlice\";\n\nimport { ContractContext } from \"../../contractContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    marginTop: theme.spacing(2),\n    justifyContent: \"space-evenly\",\n  },\n  tagList: {\n    // width: \"20%\",\n    [theme.breakpoints.down(\"sm\")]: {\n      display: \"none\",\n    },\n  },\n  postList: {\n    flexBasis: \"800px\",\n    // maxWidth: '60%',\n    marginRight: theme.spacing(1),\n    marginLeft: theme.spacing(1),\n    [theme.breakpoints.down(\"sm\")]: {\n      width: \"100%\",\n    },\n  },\n  ranking: {\n    flexBasis: \"180px\",\n    maxWidth: \"240px\",\n    [theme.breakpoints.down(\"sm\")]: {\n      display: \"none\",\n    },\n  },\n}));\n\nconst Main = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const contractAPI = useContext(ContractContext);\n  const [postFilter, setPostFilter] = useState(null);\n\n  // Initialize Post List\n  useEffect(async () => {\n    if (contractAPI) {\n      const fetchPostList = await contractAPI.getPosts();\n      dispatch(setPostList(fetchPostList));\n    }\n  }, [contractAPI]);\n\n  return (\n    <Container className={classes.root}>\n      <div className={classes.tagList}>\n        <TagList setPostFilter={setPostFilter} />\n      </div>\n      <div className={classes.postList}>\n        <PostList postFilter={postFilter} />\n      </div>\n      <div className={classes.ranking}>\n        <Ranking />\n      </div>\n    </Container>\n  );\n};\n\nexport default Main;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Chip from \"@material-ui/core/Chip\";\nimport Box from \"@material-ui/core/Box\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport { EditorState, convertFromRaw } from \"draft-js\";\nimport { timeFromNow } from \"../../utils\";\n\nimport RichTextDisplayer from \"../utils/textDisplayer\";\n\nimport { ContractContext } from \"../../contractContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    marginBottom: theme.spacing(2),\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(1),\n  },\n  answerBtn: {\n    borderRadius: \"30px\",\n  },\n  avatar: {\n    backgroundColor: \"gray\",\n  },\n  chip: {\n    marginLeft: theme.spacing(0.5),\n    marginRight: theme.spacing(0.5),\n    marginBottom: theme.spacing(0.5),\n  },\n  requestExpireBtn: {},\n}));\n\nconst Post = ({\n  title,\n  content,\n  author,\n  tags,\n  id,\n  timestamp,\n  tokens,\n  setAddAnswerDialogOpen,\n  isExpired,\n}) => {\n  const classes = useStyles();\n  const displayTime = timeFromNow(timestamp);\n  const contractAPI = useContext(ContractContext);\n  const [expireTime, setExpireTime] = useState(180);\n  const [displayerState, setDisplayerState] = useState(() =>\n    EditorState.createEmpty()\n  );\n\n  useEffect(() => {\n    if (content) {\n      setDisplayerState(\n        EditorState.createWithContent(convertFromRaw(JSON.parse(content)))\n      );\n    }\n  }, [content]);\n\n  useEffect(() => {\n    if (contractAPI) {\n      setExpireTime(parseInt(contractAPI.EXPIRE_TIME));\n    }\n  }, [contractAPI]);\n\n  // request for expire\n  const handleRequestExpire = async () => {\n    try {\n      const res = await contractAPI.requestForExpire(id);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return (\n    <Card className={classes.root} variant=\"outlined\">\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            A\n          </Avatar>\n        }\n        subheader={displayTime}\n        title={author}\n        titleTypographyProps={{ noWrap: true }}\n        subheaderTypographyProps={{ noWrap: true }}\n      />\n      <CardContent>\n        <Typography variant=\"h1\">\n          <strong>\n            {title} [{tokens} csb]\n          </strong>\n        </Typography>\n        <RichTextDisplayer displayerState={displayerState} />\n        <Box>\n          {tags.map((tag) => (\n            <Chip\n              className={classes.chip}\n              variant=\"outlined\"\n              color=\"primary\"\n              size=\"small\"\n              label={tag}\n              key={tag}\n            />\n          ))}\n        </Box>\n      </CardContent>\n      <CardActions>\n        <Button\n          className={classes.answerBtn}\n          size=\"medium\"\n          color=\"secondary\"\n          variant=\"contained\"\n          onClick={() => setAddAnswerDialogOpen(true)}\n        >\n          + Answer\n        </Button>\n        {!isExpired && Date.now() / 1000 > parseInt(timestamp) + expireTime ? (\n          <Button\n            className={classes.requestExpireBtn}\n            size=\"medium\"\n            color=\"secondary\"\n            variant=\"outlined\"\n            onClick={() => handleRequestExpire()}\n          >\n            Request for expired\n          </Button>\n        ) : isExpired ? (\n          <Button\n            className={classes.requestExpireBtn}\n            size=\"medium\"\n            disabled\n            color=\"secondary\"\n            variant=\"outlined\"\n          >\n            Expired\n          </Button>\n        ) : (\n          <Button\n            className={classes.requestExpireBtn}\n            size=\"medium\"\n            disabled\n            color=\"secondary\"\n            variant=\"outlined\"\n          >\n            Not yet expired\n          </Button>\n        )}\n      </CardActions>\n    </Card>\n  );\n};\n\nexport default Post;\n","import React, { useState, useContext, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ThumbUpIcon from \"@material-ui/icons/ThumbUp\";\nimport ThumbDownIcon from \"@material-ui/icons/ThumbDown\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Alert from \"@material-ui/lab/Alert\";\n\nimport { EditorState, convertFromRaw } from \"draft-js\";\n\nimport { timeFromNow } from \"../../utils\";\n\nimport { ContractContext } from \"../../contractContext\";\nimport RichTextDisplayer from \"../utils/textDisplayer\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    display: \"block\",\n    border: \"none\",\n    [theme.breakpoints.down(\"sm\")]: {\n      padding: theme.spacing(1),\n    },\n  },\n  avatar: {\n    backgroundColor: \"gray\",\n  },\n  content: {\n    display: \"flex\",\n  },\n  thumbUp: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  thumbUpIcon: {\n    fontSize: theme.spacing(6),\n    [theme.breakpoints.down(\"sm\")]: {\n      fontSize: theme.spacing(4),\n    },\n  },\n  cardHeader: {\n    padding: theme.spacing(1),\n  },\n}));\n\nconst AnswerItem = ({ id, content, author, timestamp, downVotes, upVotes }) => {\n  const classes = useStyles();\n  const contractAPI = useContext(ContractContext);\n  const [upVoteCnt, setUpVoteCnt] = useState(parseInt(upVotes)); // votes type are string!\n  const [downVoteCnt, setDownVoteCnt] = useState(parseInt(downVotes)); // votes type are string!\n  const [snackbarProp, setSnackbarProp] = useState({\n    open: false,\n    message: \"\",\n    status: \"null\",\n  });\n\n  const [displayerState, setDisplayerState] = useState(() =>\n    EditorState.createEmpty()\n  );\n\n  const displayTime = timeFromNow(timestamp);\n  const handleClickUpThumb = async () => {\n    // Todo Revert, you have thumbed before\n    try {\n      await contractAPI.increaseUpVotes(id);\n      setSnackbarProp({\n        open: true,\n        message: `UpVote Successfully!`,\n        status: \"success\",\n      });\n      setUpVoteCnt(upVoteCnt + 1);\n    } catch (err) {\n      setSnackbarProp({\n        open: true,\n        message: `You shouldn't vote the same answer again !`,\n        status: \"error\",\n      });\n    }\n  };\n  const handleClickDownThumb = async () => {\n    // Todo Revert, you have thumbed before\n    try {\n      await contractAPI.increaseDownVotes(id);\n      setSnackbarProp({\n        open: true,\n        message: `DownVote Successfully!`,\n        status: \"success\",\n      });\n      setDownVoteCnt(downVoteCnt + 1);\n    } catch (err) {\n      setSnackbarProp({\n        open: true,\n        message: `You shouldn't vote the same answer again !`,\n        status: \"error\",\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (content) {\n      setDisplayerState(\n        EditorState.createWithContent(convertFromRaw(JSON.parse(content)))\n      );\n    }\n  }, [content]);\n\n  return (\n    <ListItem className={classes.root} component={Card} variant=\"outlined\">\n      <div className={classes.content}>\n        <div className={classes.thumbUp}>\n          <IconButton\n            aria-label=\"This is a good answer\"\n            color=\"primary\"\n            onClick={handleClickUpThumb}\n          >\n            <ThumbUpIcon className={classes.thumbUpIcon} />\n          </IconButton>\n          <Typography variant=\"h3\" color=\"primary\">\n            {upVoteCnt}\n          </Typography>\n          <IconButton\n            aria-label=\"This is a bad answer\"\n            color=\"secondary\"\n            onClick={handleClickDownThumb}\n          >\n            <ThumbDownIcon className={classes.thumbUpIcon} />\n          </IconButton>\n          <Typography variant=\"h3\" color=\"secondary\">\n            {downVoteCnt}\n          </Typography>\n        </div>\n        <div style={{ width: \"100%\" }}>\n          <CardHeader\n            className={classes.cardHeader}\n            avatar={\n              <Avatar aria-label=\"recipe\" className={classes.avatar}>\n                A\n              </Avatar>\n            }\n            // action={\n            //   <IconButton aria-label=\"This is a good answer\">\n            //     <ThumbUpIcon />\n            //   </IconButton>\n            // }\n            title={author}\n            subheader={displayTime}\n          />\n          <CardContent>\n            <RichTextDisplayer displayerState={displayerState} />\n          </CardContent>\n        </div>\n      </div>\n      <Snackbar\n        open={snackbarProp.open}\n        autoHideDuration={2000}\n        onClose={() => setSnackbarProp({ ...snackbarProp, open: false })}\n      >\n        <Alert severity={snackbarProp.status}>{snackbarProp.message}</Alert>\n      </Snackbar>\n    </ListItem>\n  );\n};\n\nexport default AnswerItem;\n","import React, { useEffect, useContext } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport List from \"@material-ui/core/List\";\nimport Divider from \"@material-ui/core/Divider\";\n\nimport AnswerItem from \"./answerItem\";\nimport { selectAnswer, setAnswerList } from \"./answerSlice\";\nimport { ContractContext } from \"../../contractContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n  },\n  answerList: {\n    border: \"1px solid rgba(0, 0, 0, 0.12)\",\n    borderRadius: \"4px\",\n    padding: 0,\n  },\n}));\n\nconst AnswerList = ({ post }) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const contractAPI = useContext(ContractContext);\n  const { answerList } = useSelector(selectAnswer);\n  useEffect(async () => {\n    if (post) {\n      const fetchAnswerList = await contractAPI.getAnswers(post.id);\n      // console.log(fetchAnswerList);\n      dispatch(setAnswerList(fetchAnswerList));\n    }\n  }, [post]);\n  return (\n    <div>\n      <Toolbar>\n        <Typography variant=\"h2\" color=\"initial\">\n          {answerList.length} answers\n        </Typography>\n      </Toolbar>\n      <List className={classes.answerList}>\n        {answerList.map((answer, idx) => (\n          <div key={idx}>\n            <AnswerItem {...answer} />\n            <Divider />\n          </div>\n        ))}\n      </List>\n    </div>\n  );\n};\n\nexport default AnswerList;\n","import React, { useState, useEffect } from 'react';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\n\nimport { EditorState, convertFromRaw } from 'draft-js';\nimport RichTextDisplayer from '../utils/textDisplayer'\nimport RichTextEditor from '../utils/textEditor'\n\nconst useStyles = makeStyles((theme) => ({\n  typography: {\n    textAlign: \"center\",\n    marginBottom: theme.spacing(1),\n    color: \"#9999\"\n  }\n}));\n\nconst AddAnswerModal = (props) => {\n  const {\n    addAnswerDialogOpen,\n    setAddAnswerDialogOpen,\n    post,\n    editorState,\n    setEditorState,\n    handleAddAnswer\n  } = props;\n\n  const classes = useStyles();\n  const [displayerState, setDisplayerState] = useState(\n    () => EditorState.createEmpty(),\n  )\n\n  const handleAddButtonClick = () => {\n    handleAddAnswer();\n    setAddAnswerDialogOpen(false);\n  }\n\n  useEffect(() => {\n    if (post && post.content) {\n      setDisplayerState(\n        EditorState.createWithContent(convertFromRaw(JSON.parse(post.content)))\n      );\n    }\n  }, [post])\n\n  return (\n    <>\n      {\n        post ?\n          <Dialog\n            open={addAnswerDialogOpen}\n            onClose={() => setAddAnswerDialogOpen(false)}\n            scroll=\"body\"\n            fullWidth={true}\n            maxWidth=\"lg\"\n          >\n            <DialogTitle id=\"scroll-dialog-title\">\n              <Card variant=\"outlined\">\n                <CardContent>\n                  <Typography variant=\"h1\">\n                    <strong>\n                      {post.title} [{post.tokens} csb]\n                    </strong>\n                  </Typography>\n                  <RichTextDisplayer displayerState={displayerState} />\n                </CardContent>\n              </Card>\n            </DialogTitle>\n            <DialogContent dividers>\n              <Typography variant=\"overline\" display=\"block\" className={classes.typography}>\n                ---- Write your answer below ----\n              </Typography>\n              {editorState ?\n                <RichTextEditor editorState={editorState} setEditorState={setEditorState} /> :\n                <></>\n              }\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={() => setAddAnswerDialogOpen(false)} color=\"primary\">\n                Cancel\n              </Button>\n              <Button onClick={handleAddButtonClick} color=\"primary\">\n                Add\n              </Button>\n            </DialogActions>\n          </Dialog> :\n          <></>\n      }\n    </>\n\n  )\n}\n\nexport default AddAnswerModal;","import React, { useState, useEffect, useContext } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Alert from \"@material-ui/lab/Alert\";\n\nimport { EditorState, convertToRaw } from \"draft-js\";\n\nimport Post from \"../post/post\";\nimport AnswerList from \"../answer/answerList\";\nimport AddAnswerModal from \"../answer/addAnswerModal\";\n\n// import { selectPost, setPostList } from \"../post/postSlice\";\nimport { ContractContext } from \"../../contractContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    marginTop: theme.spacing(2),\n    justifyContent: \"center\",\n  },\n  content: {\n    width: \"80%\",\n    [theme.breakpoints.down(\"sm\")]: {\n      width: \"100%\",\n    },\n  },\n}));\n\nconst PostPage = () => {\n  const classes = useStyles();\n  const contractAPI = useContext(ContractContext);\n  const { postid } = useParams();\n\n  const [post, setPost] = useState(null);\n  const [addAnswerDialogOpen, setAddAnswerDialogOpen] = useState(false);\n  const [editorState, setEditorState] = useState(() =>\n    EditorState.createEmpty()\n  );\n  const [snackbarProp, setSnackbarProp] = useState({\n    open: false,\n    message: \"\",\n    status: \"null\",\n  });\n\n  const handleAddAnswer = async () => {\n    if (contractAPI && post) {\n      try {\n        const content = convertToRaw(editorState.getCurrentContent());\n        console.log(post.id);\n        const addRes = await contractAPI.addAnswer(\n          post.id,\n          JSON.stringify(content)\n        );\n        // console.log(addRes);\n        setEditorState(EditorState.createEmpty());\n        setSnackbarProp({\n          open: true,\n          message: `New answer added!`,\n          status: \"success\",\n        });\n        try {\n          const getRes = await contractAPI.getPostsByIds([postid]);\n          console.log(getRes);\n          setPost({ ...getRes[0], id: postid });\n        } catch (err) {\n          console.error(err);\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  };\n\n  // Todo: Initialization (fetch post, get user info)\n  // Initialize Post\n  useEffect(async () => {\n    if (contractAPI) {\n      try {\n        const res = await contractAPI.getPostsByIds([postid]);\n        setPost({ ...res[0], id: postid });\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  }, [contractAPI]);\n\n  return (\n    <>\n      <Container maxWidth=\"xl\" className={classes.root}>\n        {post ? (\n          <div className={classes.content}>\n            <Post {...post} setAddAnswerDialogOpen={setAddAnswerDialogOpen} />\n            <AnswerList post={post} />\n          </div>\n        ) : (\n          \"Fetching Post ...\"\n        )}\n      </Container>\n\n      <AddAnswerModal\n        addAnswerDialogOpen={addAnswerDialogOpen}\n        setAddAnswerDialogOpen={setAddAnswerDialogOpen}\n        post={post}\n        editorState={editorState}\n        setEditorState={setEditorState}\n        handleAddAnswer={handleAddAnswer}\n      />\n      <Snackbar\n        open={snackbarProp.open}\n        autoHideDuration={2000}\n        onClose={() => setSnackbarProp({ ...snackbarProp, open: false })}\n      >\n        <Alert severity={snackbarProp.status}>{snackbarProp.message}</Alert>\n      </Snackbar>\n    </>\n  );\n};\n\nexport default PostPage;\n","import React, { useState, useEffect, useContext } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useHistory, useParams, Link } from \"react-router-dom\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport Typography from \"@material-ui/core/Typography\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Alert from \"@material-ui/lab/Alert\";\n\nimport AnswerItem from \"../answer/answerItem\";\n\nimport { ContractContext } from \"../../contractContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    marginTop: theme.spacing(2),\n    justifyContent: \"center\",\n  },\n  content: {\n    width: \"80%\",\n    [theme.breakpoints.down(\"sm\")]: {\n      width: \"100%\",\n    },\n  },\n}));\n\nconst UserPage = () => {\n  const history = useHistory();\n  const classes = useStyles();\n  const contractAPI = useContext(ContractContext);\n\n  // Initial\n  const { userid } = useParams();\n\n  const [tokens, setTokens] = useState(0);\n  const [postIds, setPostIds] = useState([]);\n  const [issuedAnswerIds, setIssuedAnswerIds] = useState([]);\n  const [totalUpVotes, setTotalUpVotes] = useState(0);\n  const [upVotedAnswerIds, setUpVotedAnswerIds] = useState([]);\n  const [totalDownVotes, setTotalDownVotes] = useState(0);\n  const [downVotedAnswerIds, setDownVotedAnswerIds] = useState([]);\n\n  const [posts, setPosts] = useState([]);\n  const [answers, setAnswers] = useState([]);\n  const [snackbarProp, setSnackbarProp] = useState({\n    open: false,\n    message: \"\",\n    status: \"null\",\n  });\n\n  // Token2Ether\n  const [token2ether, setToken2ether] = useState(0);\n  const [open, setOpen] = React.useState(false);\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const handleToken2Ether = async () => {\n    try {\n      handleClose();\n      if (token2ether > tokens) throw \"Tokens not enough !\";\n      await contractAPI.token2ether(parseInt(token2ether));\n      init();\n      setSnackbarProp({\n        open: true,\n        message: \"token to ether success\",\n        status: \"success\",\n      });\n    } catch (err) {\n      console.error(err);\n      setSnackbarProp({\n        open: true,\n        message: err,\n        status: \"error\",\n      });\n    }\n  };\n  // ether2token\n  const [ether, setEther] = useState(0);\n  const [openEther, setOpenEther] = React.useState(false);\n\n  const handleClickOpenEther = () => {\n    setOpenEther(true);\n  };\n  const handleCloseEther = () => {\n    setOpenEther(false);\n  };\n  const handleEther2Token = async () => {\n    try {\n      handleCloseEther();\n      await contractAPI.ether2token(parseInt(ether));\n      init();\n      setSnackbarProp({\n        open: true,\n        message: \"token to ether success\",\n        status: \"success\",\n      });\n    } catch (err) {\n      console.error(err);\n      setSnackbarProp({\n        open: true,\n        message: err,\n        status: \"error\",\n      });\n    }\n  };\n\n  const init = async () => {\n    if (contractAPI) {\n      if (contractAPI.accounts[0] !== userid) {\n        history.push(`/user/${contractAPI.accounts[0]}`);\n      }\n      const accountInfo = await contractAPI.getAccountInfo();\n      setTokens(parseInt(accountInfo.tokens));\n      setPostIds(accountInfo.postIds);\n      setIssuedAnswerIds(accountInfo.issuedAnswerIds);\n      setUpVotedAnswerIds(accountInfo.upVotedAnswerIds);\n      setDownVotedAnswerIds(accountInfo.downVotedAnswerIds);\n      setTotalDownVotes(parseInt(accountInfo.totalDownVotes));\n      setTotalUpVotes(parseInt(accountInfo.totalUpVotes));\n\n      const fetchPosts = await contractAPI.getPostsByIds(accountInfo.postIds);\n      setPosts(fetchPosts);\n      const fetchAnswers = await contractAPI.getAnswersByIds(\n        accountInfo.issuedAnswerIds\n      );\n      setAnswers(fetchAnswers);\n    }\n  };\n\n  useEffect(async () => {\n    init();\n  }, [contractAPI]);\n  return (\n    <Container maxWidth=\"xl\" className={classes.root}>\n      <div className={classes.content}>\n        <Typography variant=\"h2\" noWrap>\n          User {userid}\n        </Typography>\n        <div>\n          <Typography variant=\"h2\">Tokens: {tokens}</Typography>\n          <Button variant=\"outlined\" onClick={handleClickOpen}>\n            Token to ether\n          </Button>{\" \"}\n          <Button variant=\"outlined\" onClick={handleClickOpenEther}>\n            Ether to token\n          </Button>\n        </div>\n        <br />\n        <Typography variant=\"h2\">Total Up Votes: {totalUpVotes}</Typography>\n        <Typography variant=\"h2\">Total Down Votes: {totalDownVotes}</Typography>\n        <Typography variant=\"h2\">IssuedPosts: </Typography>\n        <List>\n          <Divider />\n\n          {postIds.map((id, idx) => (\n            <div key={`post_${idx}`}>\n              <ListItem button component={Link} to={`/post/${id}`}>\n                <ListItemText>post {id}</ListItemText>\n              </ListItem>\n              <Divider />\n            </div>\n          ))}\n        </List>\n        <Typography variant=\"h2\">IssuedAnswers: </Typography>\n        <List>\n          {answers.map((answer, idx) => (\n            <div key={`answer_${idx}`}>\n              <Button component={Link} to={`/post/${answer.parentPostId}`}>\n                <Typography variant=\"h3\">\n                  From Post {answer.parentPostId}\n                </Typography>\n              </Button>\n              <div\n                style={{\n                  border: \"1px gray solid\",\n                  margin: \"8px\",\n                }}\n              >\n                <AnswerItem {...answer} />\n              </div>\n            </div>\n          ))}\n        </List>\n      </div>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">\n          <Typography variant=\"h2\">Token to Ether</Typography>\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>Please Enter Token amount</DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"token\"\n            label=\"Token\"\n            type=\"number\"\n            fullWidth\n            required\n            value={token2ether}\n            onChange={(e) => {\n              setToken2ether(e.target.value);\n            }}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={handleToken2Ether} color=\"primary\">\n            OK\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog\n        open={openEther}\n        onClose={handleCloseEther}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">\n          <Typography variant=\"h2\">Ether to Token</Typography>\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Please Enter Ether amount (multiplied by{\" \"}\n            {contractAPI ? contractAPI.TOKEN_VALUE : 0.000001})\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"token\"\n            label=\"Ether\"\n            type=\"number\"\n            fullWidth\n            required\n            value={ether}\n            onChange={(e) => {\n              setEther(e.target.value);\n            }}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseEther} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={handleEther2Token} color=\"primary\">\n            OK\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Snackbar\n        open={snackbarProp.open}\n        autoHideDuration={2000}\n        onClose={() => setSnackbarProp({ ...snackbarProp, open: false })}\n      >\n        <Alert severity={snackbarProp.status}>{snackbarProp.message}</Alert>\n      </Snackbar>\n    </Container>\n  );\n};\n\nexport default UserPage;\n","import React, { useEffect } from \"react\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nimport store from \"./store\";\nimport AppBar from \"./components/appBar\";\nimport Main from \"./features/pages/mainPage\";\nimport PostPage from \"./features/pages/postPage\";\nimport UserPage from \"./features/pages/userPage\";\n\nimport Web3Provider from \"./Web3\";\nimport ContractProvider from \"./contractContext\";\n\nimport \"./App.css\";\n\nconst theme = createMuiTheme({\n  typography: {\n    // In Chinese and Japanese the characters are usually larger,\n    // so a smaller fontsize may be appropriate.\n    h1: {\n      fontSize: \"2rem\",\n    },\n    h2: {\n      fontSize: \"1.5rem\",\n    },\n    h3: {\n      fontSize: \"1.1rem\",\n    },\n    h4: {\n      fontSize: \"1rem\",\n    },\n    h5: {\n      fontSize: \"0.8rem\",\n    },\n    h6: {\n      fontSize: \"0.6rem\",\n    },\n    fontSize: 16,\n  },\n  palette: {\n    type: \"light\",\n    primary: {\n      main: \"#006AC7\",\n    },\n  },\n});\n\nfunction MyRoute() {\n  return (\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <AppBar />\n      <Switch>\n        <Route path=\"/post/:postid\">\n          <PostPage />\n        </Route>\n        <Route path=\"/user/:userid\">\n          <UserPage />\n        </Route>\n        <Route path=\"/\">\n          <Main />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <ContractProvider>\n        {/* <Web3Provider> */}\n        <ThemeProvider theme={theme}>\n          <CssBaseline />\n          <MyRoute />\n        </ThemeProvider>\n        {/* </Web3Provider> */}\n      </ContractProvider>\n    </Provider>\n  );\n}\n\nexport default App;\n","import React, { useState, useEffect, createContext } from \"react\";\nimport AppContract from \"./contracts/App.json\";\nimport getWeb3 from \"./utils/getWeb3\";\n\nconst Web3Context = createContext(null);\n\nexport { Web3Context };\n\nexport default ({ children }) => {\n  const [web3, setWeb3] = useState(null);\n  const [accounts, setAccounts] = useState(null);\n  const [contract, setContract] = useState(null);\n\n  useEffect(async () => {\n    try {\n      const web3 = await getWeb3();\n      const accounts = await web3.eth.getAccounts();\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork = AppContract.networks[networkId];\n      const instance = new web3.eth.Contract(\n        AppContract.abi,\n        deployedNetwork && deployedNetwork.address\n      );\n      console.log(accounts, networkId, deployedNetwork, instance);\n\n      setWeb3(web3);\n      setAccounts(accounts);\n      setContract(instance);\n    } catch (error) {\n      alert(\n        `Failed to load web3, accounts, or contract. Check console for details.`\n      );\n      console.error(error);\n    }\n  }, []);\n\n  return (\n    <Web3Context.Provider value={{ web3, accounts, contract }}>\n      {children}\n    </Web3Context.Provider>\n  );\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}